import { useRef } from "react";
import Link from "next/link";

// lib
import Draggable from "react-draggable";
import classNames from "classnames";

// contexts
import { useTheme } from "../../lib/contexts/ThemeProvider";

const PinnedBadge = ({ className, svgProps, linkTo, linkText }) => {
  const { theme } = useTheme();
  const textColor = `text-js-${theme}`;

  const nodeRef = useRef(null);

  return (
    <Draggable nodeRef={nodeRef} handle="#abstract-shape-drag-button">
      <div className={classNames("fixed", className)} ref={nodeRef}>
        <button
          id="abstract-shape-drag-button"
          className={classNames(
            "absolute rotate-[20deg] z-20 -top-5 sm:-top-2 md:-top-5 active:-top-6 right-[45%] active:right-[42%] translate-x-1/2 translate-y-1/2",
            "white-outline-text text-[1.3rem] md:text-[2rem]",
            "peer hover:cursor-move active:outline-none focus:outline-none transition-all duration-200 ease-in-out",
            textColor,
          )}
        >
          ðŸ–ˆ
        </button>

        <Link
          className="absolute peer-active:rotate-[4deg] underline z-10 bottom-1/2 right-1/2 translate-x-1/2 translate-y-1/2 text-center leading-4 sm:leading-6 lg:leading-7 font-js-math text-[1.5ch] sm:text-[2ch] lg:text-[3ch] rainbow-text-on-hover-from-black"
          href={linkTo}
        >
          {linkText}
        </Link>
        <svg
          className="abstract-shape-svg w-full h-full peer-active:drop-shadow-[1px_4px_7px_rgba(20,15,10,0.6)] peer-active:rotate-[4deg] transition-all duration-200 ease-in-out-quad"
          width="500"
          height="380"
          viewBox="0 0 500 380"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          {...svgProps}
        >
          <path
            className="abstract-shape-path"
            d="M229.661 37.0602C242.82 36.7263 256.004 36.9655 269.171 36.9257C270.824 36.8409 272.393 37.4689 274.034 37.5387C276.79 37.6932 279.602 37.2347 282.323 37.9124C284.688 38.5653 287.18 37.8377 289.55 38.4706C291.562 39.0388 293.69 38.6251 295.703 39.2182C313.277 40.9426 330.697 44.3016 347.861 48.5228C354.777 50.2432 361.637 52.2158 368.406 54.4635C373.009 55.7253 377.494 57.3899 381.944 59.1183C395.774 64.1917 409.298 70.2131 422.122 77.5531C425.161 79.1838 427.105 82.198 429.002 84.9988C446.932 109.997 458.698 139.69 462.033 170.505C462.125 172.877 462.316 175.239 462.812 177.567C462.9 185.188 462.815 192.808 462.85 200.423C462.909 202.586 462.322 204.682 462.213 206.832C462.097 210.519 461.221 214.139 461.224 217.835C459.614 225.231 458.472 232.808 455.942 239.974C455.512 241.524 455.28 243.15 454.634 244.629C453.968 246.083 453.934 247.76 453.121 249.159C452.054 250.83 452.064 252.901 451.129 254.635C449.323 257.961 448.191 261.593 446.694 265.062C445.035 268.069 443.807 271.308 442.005 274.228C440.874 275.508 440.37 277.173 439.469 278.602C436.131 284.394 432.635 290.116 428.605 295.443C427.366 297.147 426.28 299.022 424.61 300.341C421.488 302.897 417.449 303.84 414.217 306.218C412.999 307.094 411.597 307.624 410.198 308.091C407.557 309.189 405.176 310.896 402.439 311.767C400.588 312.359 399.057 313.675 397.19 314.228C394.299 315.09 391.703 316.71 388.854 317.678C386.268 318.394 384.012 319.965 381.388 320.578C376.962 322.317 372.477 323.897 367.948 325.323C366.702 325.384 365.428 325.202 364.229 325.627C361.966 326.419 359.606 326.977 357.557 328.263C351.692 330.224 345.625 331.489 339.628 332.939C334.155 334.044 328.74 335.476 323.208 336.268C320.144 337.163 316.922 337.144 313.843 337.962C310.99 338.645 308.013 338.396 305.174 339.153C301.889 339.949 298.447 339.575 295.177 340.438C290.438 341.459 285.532 340.697 280.788 341.728C266.993 343.05 253.12 342.213 239.285 342.497C232.769 342.491 226.228 342.388 219.742 341.704C215.022 340.692 210.14 341.459 205.437 340.418C202.294 339.59 198.999 339.954 195.841 339.216C192.508 338.324 188.993 338.669 185.673 337.686C172.445 335.679 159.355 332.689 146.391 329.31C144.339 328.591 142.147 328.243 140.238 327.153C136.967 325.463 133.34 324.64 129.717 324.275C125.996 323.325 122.511 321.63 118.864 320.448C116.166 319.671 113.777 318.111 111.05 317.419C108.364 316.122 105.602 315.01 102.816 313.94C101.082 313.292 99.5956 312.106 97.8136 311.573C94.8224 310.621 92.2963 308.607 89.3198 307.621C87.949 307.183 86.8083 306.27 85.559 305.582C81.7855 303.454 77.6438 301.918 74.2659 299.123C69.9578 293.513 66.242 287.392 62.2326 281.533C61.7088 280.552 61.3024 279.504 60.6415 278.61C59.6183 277.217 59.2218 275.475 58.2564 274.057C55.9369 270.983 54.5465 267.308 53.2345 263.7C52.3817 261.786 51.1872 260.023 50.6242 257.985C49.9535 255.18 48.2303 252.792 47.5987 249.964C45.5387 245.411 44.5929 240.462 42.948 235.75C40.8722 227.562 39.3301 219.23 38.2678 210.837C37.8125 207.972 38.0279 205.042 37.3425 202.211C37.1026 194.627 37.3083 187.035 37.225 179.446C37.0537 176.93 38.1209 174.537 37.8712 172.016C39.805 153.83 44.3873 135.873 51.8187 119.193C57.5025 105.392 65.4832 92.6937 74.2551 80.7328C75.808 78.496 78.573 77.8282 80.6977 76.3331C92.8828 69.6689 105.563 63.9336 118.58 59.1681C122.884 57.7139 127.045 55.825 131.454 54.6887C156.931 46.4855 183.293 41.2675 209.877 38.66C212.398 38.0271 214.988 38.3311 217.539 38.0919C221.475 36.9356 225.656 38.1616 229.631 37.0602H229.661Z"
            fill="#E8E9EB"
          />
          <path
            className="abstract-shape-path"
            d="M229.69 0.182082C231.231 -0.077073 232.798 0.0275874 234.355 0.0126362C244.802 0.0176199 255.245 0.0126362 265.687 0.0126362C267.67 0.0275874 269.672 -0.121923 271.624 0.32163C276.231 1.25359 280.954 0.969514 285.596 1.48782C289.057 2.37493 292.647 2.29021 296.152 2.82347C299.372 3.83018 302.805 3.57103 306.041 4.50797C320.752 6.86029 335.272 10.5682 349.479 15.1831C357.63 17.8544 365.773 20.5955 373.659 24.0044C376.5 24.9513 379.01 26.6806 381.869 27.6126C390.587 32.1378 399.554 36.2145 407.869 41.4913C418.335 47.6313 428.126 54.9235 437.393 62.7729C439.263 64.1883 440.565 66.2565 442.676 67.3529C446.655 71.2762 450.513 75.3369 454.464 79.294C456.294 80.9486 457.391 83.2601 459.291 84.8558C463.452 89.4698 466.992 94.619 470.736 99.5928C472.662 102.901 474.897 106.016 476.955 109.25C479.158 112.768 480.803 116.591 482.814 120.229C484.434 122.218 485.242 124.71 486.48 126.938C487.352 128.502 487.891 130.212 488.38 131.931C490.411 136.353 492.012 140.967 493.511 145.602C494.265 149.016 495.636 152.245 496.362 155.67C498.238 162.812 498.944 170.186 499.942 177.489C500.034 185.707 499.998 193.935 499.962 202.154C499.119 208.484 498.532 214.857 497.092 221.086C491.119 248.85 477.371 274.578 459 295.853C454.5 301.525 449.037 306.304 444.109 311.572C440.25 315.135 436.186 318.474 432.137 321.812C410.669 338.444 386.656 351.655 361.251 360.875C355.543 362.914 349.795 364.822 344.048 366.719C328.176 371.341 312.042 375.124 295.651 377.214C292.224 377.913 288.713 377.942 285.28 378.595C283.587 378.772 281.859 378.562 280.195 378.999C277.529 379.763 274.722 378.891 272.056 379.638C271.101 379.875 270.118 380 269.139 380C256.249 379.893 243.359 380.025 230.474 379.928C226.979 379.021 223.351 379.658 219.841 378.941C193.695 376.553 167.742 371.051 142.966 362.131C134.378 359.145 125.886 355.838 117.719 351.794C110.523 348.794 103.787 344.807 96.9679 341.034C84.7437 333.909 73.1167 325.73 62.2192 316.649C58.8265 313.61 55.4486 310.56 52.006 307.584C49.4016 304.923 46.7149 302.339 44.2417 299.553C42.445 296.931 39.9385 294.944 38.0488 292.401C31.4495 284.004 25.1832 275.287 20.0037 265.897C15.6662 257.748 11.549 249.441 8.48931 240.694C3.98049 228.002 1.11658 214.689 0.0287878 201.233C-0.00548117 193.448 -0.0152713 185.659 0.0336844 177.875C0.665213 173.379 1.02748 168.835 1.88421 164.373C3.81306 157.492 4.94884 150.385 7.38193 143.65C8.22397 140.361 9.70733 137.281 10.755 134.051C13.5504 127.278 17.1437 120.884 20.2034 114.231C25.0305 105.992 30.1806 97.9491 36.1385 90.5234C37.0295 88.6844 39.1052 87.8122 39.7906 85.8396C41.6069 83.875 43.6728 82.1258 45.1121 79.8243C48.4362 76.235 51.9757 72.851 55.3448 69.3026C56.274 68.2112 57.6986 67.7526 58.619 66.6562C61.9137 63.1387 65.978 60.5272 69.5664 57.3625C75.3579 52.6778 81.7368 48.8334 87.7633 44.4846C92.8537 41.5392 97.7493 38.2339 103.018 35.6085C108.353 32.9173 113.656 30.1563 119.007 27.495C120.877 26.8371 122.673 26.0148 124.392 25.0131C127.935 23.6376 131.441 22.1674 134.976 20.752C152.032 14.5223 169.456 9.14484 187.285 5.80574C189.88 4.94355 192.656 5.08808 195.281 4.34052C198.317 3.578 201.508 3.7624 204.515 2.82048C208.079 2.29718 211.72 2.33207 215.235 1.45493C220.062 1.05424 224.928 1.14893 229.697 0.207002M229.628 37.3907C225.653 38.4921 221.472 37.2661 217.507 38.4173C214.956 38.6566 212.366 38.3526 209.845 38.9855C183.262 41.593 156.899 46.81 131.423 55.0142C127.011 56.1505 122.85 58.0393 118.548 59.4936C105.53 64.258 92.8517 69.9943 80.6667 76.6586C78.542 78.1537 75.775 78.8215 74.2241 81.0582C65.4502 93.0192 57.4714 105.718 51.7867 119.519C44.3552 136.198 39.772 154.156 37.8392 172.34C38.0889 174.862 37.0217 177.255 37.193 179.771C37.2762 187.361 37.0706 194.953 37.3105 202.537C37.9959 205.368 37.7805 208.297 38.2358 211.163C39.2981 219.555 40.8402 227.887 42.9159 236.076C44.5608 240.787 45.5067 245.733 47.5667 250.289C48.1992 253.116 49.9215 255.502 50.5922 258.308C51.1552 260.348 52.3497 262.112 53.2015 264.025C54.5135 267.633 55.9039 271.307 58.2254 274.381C59.1888 275.804 59.5863 277.542 60.6095 278.936C61.2704 279.829 61.6767 280.874 62.2006 281.856C66.21 287.72 69.9258 293.838 74.2339 299.449C77.6118 302.245 81.7535 303.781 85.5279 305.908C86.7744 306.594 87.916 307.506 89.2877 307.946C92.2642 308.933 94.7904 310.946 97.7816 311.898C99.5635 312.431 101.053 313.618 102.785 314.265C105.57 315.336 108.331 316.447 111.019 317.744C113.746 318.437 116.135 319.997 118.832 320.773C122.48 321.955 125.964 323.651 129.685 324.601C133.308 324.965 136.935 325.788 140.206 327.478C142.115 328.569 144.308 328.917 146.359 329.635C159.323 333.015 172.414 336.006 185.641 338.012C188.961 338.995 192.475 338.651 195.809 339.542C198.967 340.28 202.262 339.916 205.405 340.743C210.11 341.785 214.99 341.017 219.71 342.03C226.196 342.714 232.737 342.816 239.253 342.822C253.088 342.538 266.962 343.375 280.757 342.054C285.502 341.022 290.407 341.784 295.145 340.763C298.416 339.901 301.856 340.275 305.141 339.478C307.981 338.721 310.958 338.97 313.81 338.287C316.891 337.47 320.114 337.489 323.177 336.594C328.707 335.801 334.123 334.371 339.597 333.264C345.594 331.814 351.658 330.546 357.524 328.589C359.576 327.304 361.936 326.745 364.197 325.952C365.397 325.528 366.668 325.709 367.917 325.648C372.446 324.223 376.93 322.642 381.355 320.904C383.981 320.291 386.237 318.72 388.821 318.003C391.67 317.033 394.266 315.414 397.159 314.554C399.024 313.998 400.558 312.685 402.406 312.091C405.143 311.224 407.524 309.513 410.167 308.417C411.567 307.949 412.966 307.42 414.186 306.544C417.416 304.164 421.455 303.224 424.579 300.667C426.249 299.347 427.334 297.472 428.574 295.769C432.601 290.44 436.098 284.719 439.436 278.928C440.337 277.498 440.842 275.834 441.972 274.553C443.774 271.631 445.004 268.391 446.663 265.388C448.16 261.919 449.293 258.286 451.098 254.961C452.033 253.227 452.021 251.155 453.088 249.485C453.901 248.085 453.935 246.409 454.601 244.955C455.247 243.475 455.478 241.85 455.911 240.3C458.441 233.134 459.583 225.557 461.193 218.161C461.188 214.464 462.066 210.845 462.182 207.158C462.289 205.009 462.878 202.912 462.819 200.747C462.784 193.131 462.867 185.512 462.779 177.892C462.285 175.565 462.094 173.203 462 170.83C458.667 140.016 446.898 110.323 428.971 85.3243C427.072 82.5235 425.127 79.5083 422.089 77.8786C409.266 70.5376 395.741 64.5172 381.911 59.4437C377.461 57.7154 372.976 56.0508 368.375 54.7889C361.604 52.5413 354.746 50.5687 347.828 48.8483C330.667 44.6271 313.247 41.269 295.67 39.5437C293.658 38.9506 291.529 39.3643 289.517 38.7961C287.147 38.1632 284.655 38.8908 282.292 38.2379C279.569 37.5601 276.76 38.0186 274.001 37.8642C272.362 37.7944 270.791 37.1664 269.14 37.2511C255.981 37.305 242.792 37.0658 229.633 37.3997L229.628 37.3907Z"
            fill="#121416"
          />
        </svg>
      </div>
    </Draggable>
  );
};

export default PinnedBadge;
